{
    "info": {
        "_postman_id": "mailgreet-api-collection-2026",
        "name": "MailGreet API Collection",
        "description": "Complete API collection for MailGreet - Email Marketing Platform.\n\n## Authentication\nAll API requests require an API key in the Authorization header:\n```\nAuthorization: Bearer YOUR_API_KEY\n```\n\nGenerate your API key from the Integrations page in your MailGreet dashboard.\n\n## Base URL\n- **Production**: `https://your-production-url.com/api/v1/external`\n- **Development**: `http://localhost:8001/api/v1/external`",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8001/api/v1/external",
            "type": "string"
        },
        {
            "key": "api_key",
            "value": "YOUR_API_KEY",
            "type": "string"
        }
    ],
    "auth": {
        "type": "bearer",
        "bearer": [
            {
                "key": "token",
                "value": "{{api_key}}",
                "type": "string"
            }
        ]
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Test Authentication",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/test-auth",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "test-auth"
                            ]
                        },
                        "description": "Test your API key authentication. This should be your first request to verify your API key is working correctly.\n\n**Response:**\n- `user_id` - Your user ID\n- `clerk_user_id` - Your Clerk user ID\n- `api_key_name` - Name of the API key used\n- `authenticated_at` - Timestamp of authentication"
                    },
                    "response": [
                        {
                            "name": "Successful Authentication",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/test-auth",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "test-auth"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"message\": \"API key authentication successful\",\n  \"data\": {\n    \"user_id\": \"uuid-here\",\n    \"clerk_user_id\": \"user_xxxxx\",\n    \"api_key_name\": \"Default API Key\",\n    \"authenticated_at\": \"2026-01-18T14:00:00Z\"\n  }\n}"
                        }
                    ]
                }
            ],
            "description": "Test your API key authentication before making other requests."
        },
        {
            "name": "Subscribers",
            "item": [
                {
                    "name": "List All Subscribers",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/subscribers?page=1&per_page=20&status=active",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers"
                            ],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1",
                                    "description": "Page number (default: 1)"
                                },
                                {
                                    "key": "per_page",
                                    "value": "20",
                                    "description": "Items per page (default: 20, max: 100)"
                                },
                                {
                                    "key": "status",
                                    "value": "active",
                                    "description": "Filter by status: active, unsubscribed, bounced, complained"
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "description": "Search by email, first name, or last name",
                                    "disabled": true
                                },
                                {
                                    "key": "group_id",
                                    "value": "",
                                    "description": "Filter by subscriber group ID",
                                    "disabled": true
                                }
                            ]
                        },
                        "description": "Retrieve a paginated list of all subscribers.\n\n**Query Parameters:**\n- `page` - Page number (default: 1)\n- `per_page` - Items per page (default: 20, max: 100)\n- `status` - Filter by status (active, unsubscribed, bounced, complained)\n- `search` - Search by email, first name, or last name\n- `group_id` - Filter by subscriber group ID"
                    },
                    "response": [
                        {
                            "name": "Successful Response",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/subscribers?page=1&per_page=20&status=active",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"subscribers\": [\n      {\n        \"id\": \"uuid-1\",\n        \"email\": \"user1@example.com\",\n        \"first_name\": \"John\",\n        \"last_name\": \"Doe\",\n        \"status\": \"active\",\n        \"created_at\": \"2026-01-13T12:00:00Z\"\n      },\n      {\n        \"id\": \"uuid-2\",\n        \"email\": \"user2@example.com\",\n        \"first_name\": \"Jane\",\n        \"last_name\": \"Smith\",\n        \"status\": \"active\",\n        \"created_at\": \"2026-01-13T12:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"current_page\": 1,\n      \"total_pages\": 5,\n      \"total_count\": 100,\n      \"per_page\": 20\n    }\n  }\n}"
                        }
                    ]
                },
                {
                    "name": "Create Subscriber",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"subscriber@example.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\",\n    \"group_ids\": [],\n    \"custom_fields\": {\n        \"company\": \"Example Corp\",\n        \"position\": \"Marketing Manager\"\n    }\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/subscribers",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers"
                            ]
                        },
                        "description": "Create a new subscriber.\n\n**Required Fields:**\n- `email` - Valid email address\n\n**Optional Fields:**\n- `first_name` - First name\n- `last_name` - Last name\n- `phone` - Phone number\n- `group_ids` - Array of group IDs to add subscriber to\n- `custom_fields` - Object with custom field key-value pairs\n\n**Note:** This endpoint respects your plan's subscriber limits. If you've reached your limit, a 403 error will be returned."
                    },
                    "response": [
                        {
                            "name": "Successful Creation",
                            "originalRequest": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"subscriber@example.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\",\n    \"group_ids\": [\"GROUP_ID\"],\n    \"custom_fields\": {\n        \"company\": \"Example Corp\"\n    }\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/subscribers",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers"
                                    ]
                                }
                            },
                            "status": "Created",
                            "code": 201,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"uuid-here\",\n    \"email\": \"subscriber@example.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\",\n    \"status\": \"active\",\n    \"created_at\": \"2026-01-18T12:00:00Z\"\n  }\n}"
                        },
                        {
                            "name": "Subscriber Limit Exceeded",
                            "originalRequest": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"subscriber@example.com\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/subscribers",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers"
                                    ]
                                }
                            },
                            "status": "Forbidden",
                            "code": 403,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": false,\n  \"error\": \"Subscriber limit exceeded. Please upgrade your plan.\",\n  \"data\": {\n    \"current_count\": 100,\n    \"limit\": 100\n  }\n}"
                        }
                    ]
                },
                {
                    "name": "Get Subscriber by ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/subscribers/:subscriberId",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers",
                                ":subscriberId"
                            ],
                            "variable": [
                                {
                                    "key": "subscriberId",
                                    "value": "SUBSCRIBER_ID_HERE",
                                    "description": "The UUID of the subscriber"
                                }
                            ]
                        },
                        "description": "Retrieve details of a specific subscriber by their ID.\n\n**Path Parameters:**\n- `subscriberId` - The UUID of the subscriber"
                    },
                    "response": [
                        {
                            "name": "Successful Response",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/subscribers/uuid-here",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers",
                                        "uuid-here"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"uuid-here\",\n    \"email\": \"subscriber@example.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\",\n    \"status\": \"active\",\n    \"groups\": [\n      {\n        \"id\": \"group-uuid\",\n        \"name\": \"Newsletter\"\n      }\n    ],\n    \"custom_fields\": {\n      \"company\": \"Example Corp\"\n    },\n    \"notes\": [],\n    \"created_at\": \"2026-01-13T12:00:00Z\",\n    \"updated_at\": \"2026-01-18T14:00:00Z\"\n  }\n}"
                        },
                        {
                            "name": "Subscriber Not Found",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/subscribers/invalid-id",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers",
                                        "invalid-id"
                                    ]
                                }
                            },
                            "status": "Not Found",
                            "code": 404,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": false,\n  \"error\": \"Subscriber not found\"\n}"
                        }
                    ]
                },
                {
                    "name": "Update Subscriber",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"first_name\": \"Jane\",\n    \"last_name\": \"Smith\",\n    \"phone\": \"+0987654321\",\n    \"custom_fields\": {\n        \"company\": \"New Company Inc.\",\n        \"position\": \"CEO\"\n    }\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/subscribers/:subscriberId",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers",
                                ":subscriberId"
                            ],
                            "variable": [
                                {
                                    "key": "subscriberId",
                                    "value": "SUBSCRIBER_ID_HERE",
                                    "description": "The UUID of the subscriber to update"
                                }
                            ]
                        },
                        "description": "Update an existing subscriber's information.\n\n**Path Parameters:**\n- `subscriberId` - The UUID of the subscriber\n\n**Optional Fields (include only what you want to update):**\n- `first_name` - First name\n- `last_name` - Last name\n- `phone` - Phone number\n- `status` - Status (active, unsubscribed, etc.)\n- `custom_fields` - Object with custom field key-value pairs\n- `group_ids` - Array of group IDs"
                    },
                    "response": [
                        {
                            "name": "Successful Update",
                            "originalRequest": {
                                "method": "PUT",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"first_name\": \"Jane\",\n    \"last_name\": \"Smith\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/subscribers/uuid-here",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers",
                                        "uuid-here"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"uuid-here\",\n    \"email\": \"subscriber@example.com\",\n    \"first_name\": \"Jane\",\n    \"last_name\": \"Smith\",\n    \"phone\": \"+0987654321\",\n    \"status\": \"active\",\n    \"updated_at\": \"2026-01-18T14:00:00Z\"\n  }\n}"
                        }
                    ]
                },
                {
                    "name": "Delete Subscriber",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/subscribers/:subscriberId",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers",
                                ":subscriberId"
                            ],
                            "variable": [
                                {
                                    "key": "subscriberId",
                                    "value": "SUBSCRIBER_ID_HERE",
                                    "description": "The UUID of the subscriber to delete"
                                }
                            ]
                        },
                        "description": "Permanently delete a subscriber.\n\n**Path Parameters:**\n- `subscriberId` - The UUID of the subscriber\n\n**⚠️ Warning:** This action is permanent and cannot be undone."
                    },
                    "response": [
                        {
                            "name": "Successful Deletion",
                            "originalRequest": {
                                "method": "DELETE",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/subscribers/uuid-here",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers",
                                        "uuid-here"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"message\": \"Subscriber deleted successfully\"\n}"
                        }
                    ]
                },
                {
                    "name": "Get Subscriber Statistics",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/subscribers/stats",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers",
                                "stats"
                            ]
                        },
                        "description": "Get aggregate statistics about your subscribers.\n\n**Response includes:**\n- Total subscriber count\n- Active subscribers\n- Unsubscribed count\n- Bounced count\n- Current plan limit\n- Usage percentage"
                    },
                    "response": [
                        {
                            "name": "Successful Response",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/subscribers/stats",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers",
                                        "stats"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"total\": 1500,\n    \"active\": 1350,\n    \"unsubscribed\": 100,\n    \"bounced\": 50,\n    \"limit\": 5000,\n    \"usage_percentage\": 30\n  }\n}"
                        }
                    ]
                },
                {
                    "name": "Bulk Import Subscribers (Async)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "file",
                                    "type": "file",
                                    "src": "",
                                    "description": "CSV file with subscribers (required columns: email)"
                                },
                                {
                                    "key": "group_ids",
                                    "value": "[\"GROUP_ID_1\", \"GROUP_ID_2\"]",
                                    "type": "text",
                                    "description": "JSON array of group IDs to assign imported subscribers (optional)"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/subscribers/import-async",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "subscribers",
                                "import-async"
                            ]
                        },
                        "description": "Bulk import subscribers from a CSV file. The import is processed asynchronously.\n\n**Request:**\n- `file` (required) - CSV file with subscriber data\n- `group_ids` (optional) - JSON array of group IDs\n\n**CSV Format:**\n- Required column: `email`\n- Optional columns: `first_name`, `last_name`, `phone`, and any custom field names\n\n**Response:**\nReturns a job ID that can be used to check the import status."
                    },
                    "response": [
                        {
                            "name": "Import Started",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "file",
                                            "type": "file",
                                            "src": "subscribers.csv"
                                        }
                                    ]
                                },
                                "url": {
                                    "raw": "{{base_url}}/subscribers/import-async",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "subscribers",
                                        "import-async"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"job_id\": \"import-job-uuid\",\n    \"status\": \"processing\",\n    \"message\": \"Import started. Check status with job_id.\"\n  }\n}"
                        }
                    ]
                }
            ],
            "description": "Endpoints for managing subscribers - create, read, update, delete, and bulk import."
        },
        {
            "name": "Health Check",
            "item": [
                {
                    "name": "API Health Check",
                    "request": {
                        "auth": {
                            "type": "noauth"
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "http://localhost:8001/api/health",
                            "protocol": "http",
                            "host": [
                                "localhost"
                            ],
                            "port": "8001",
                            "path": [
                                "api",
                                "health"
                            ]
                        },
                        "description": "Check if the API is running and available. This endpoint does not require authentication."
                    },
                    "response": [
                        {
                            "name": "Healthy",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "http://localhost:8001/api/health",
                                    "protocol": "http",
                                    "host": [
                                        "localhost"
                                    ],
                                    "port": "8001",
                                    "path": [
                                        "api",
                                        "health"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"status\": \"ok\",\n  \"message\": \"MailGreet Laravel API is running\",\n  \"timestamp\": \"2026-01-18T14:00:00Z\",\n  \"version\": \"1.0.0\"\n}"
                        }
                    ]
                }
            ],
            "description": "Public health check endpoint that doesn't require authentication."
        },
        {
            "name": "Plans (Public)",
            "item": [
                {
                    "name": "Get All Plans",
                    "request": {
                        "auth": {
                            "type": "noauth"
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "http://localhost:8001/api/v1/plans",
                            "protocol": "http",
                            "host": [
                                "localhost"
                            ],
                            "port": "8001",
                            "path": [
                                "api",
                                "v1",
                                "plans"
                            ]
                        },
                        "description": "Get all available subscription plans. This endpoint is public and doesn't require authentication."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "http://localhost:8001/api/v1/plans",
                                    "protocol": "http",
                                    "host": [
                                        "localhost"
                                    ],
                                    "port": "8001",
                                    "path": [
                                        "api",
                                        "v1",
                                        "plans"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"uuid\",\n      \"name\": \"Free\",\n      \"price\": 0,\n      \"max_subscribers\": 100,\n      \"monthly_email_limit\": 300,\n      \"features\": [\"Basic features\"]\n    },\n    {\n      \"id\": \"uuid\",\n      \"name\": \"Pro\",\n      \"price\": 29,\n      \"max_subscribers\": 5000,\n      \"monthly_email_limit\": 50000,\n      \"features\": [\"All features\", \"Priority support\"]\n    }\n  ]\n}"
                        }
                    ]
                },
                {
                    "name": "Get Verification Credit Plans",
                    "request": {
                        "auth": {
                            "type": "noauth"
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "http://localhost:8001/api/v1/credits/plans",
                            "protocol": "http",
                            "host": [
                                "localhost"
                            ],
                            "port": "8001",
                            "path": [
                                "api",
                                "v1",
                                "credits",
                                "plans"
                            ]
                        },
                        "description": "Get all available verification credit plans. This endpoint is public and doesn't require authentication."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "http://localhost:8001/api/v1/credits/plans",
                                    "protocol": "http",
                                    "host": [
                                        "localhost"
                                    ],
                                    "port": "8001",
                                    "path": [
                                        "api",
                                        "v1",
                                        "credits",
                                        "plans"
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "body": "{\n  \"success\": true,\n  \"message\": \"Verification credit plans retrieved successfully\",\n  \"data\": {\n    \"plans\": [\n      {\n        \"id\": \"uuid\",\n        \"name\": \"5,000 Credits\",\n        \"description\": \"Best value for growing businesses\",\n        \"price\": 2900,\n        \"credits\": 5000,\n        \"product_id\": \"verify_5000_credits\",\n        \"formatted_price\": \"$29.00\",\n        \"popular\": true\n      }\n    ],\n    \"total_plans\": 5,\n    \"currency\": \"USD\"\n  },\n  \"timestamp\": \"2026-01-18T14:00:00Z\"\n}"
                        }
                    ]
                }
            ],
            "description": "Public endpoints for viewing available plans."
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Auto-check for success response",
                    "pm.test(\"Response status is 2xx\", function () {",
                    "    pm.expect(pm.response.code).to.be.within(200, 299);",
                    "});",
                    "",
                    "pm.test(\"Response has success field\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData).to.have.property('success');",
                    "});"
                ]
            }
        }
    ]
}